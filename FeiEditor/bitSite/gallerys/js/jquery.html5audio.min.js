(function(g){g.fn.html5audio=function(f){function ib(a){if(k&&!q&&!P){if(!W){if(H){if(a=a.originalEvent.touches,!(a&&0<a.length))return!1}else a.preventDefault();W=!0;F.bind(Q,function(a){a:{var c;if(H){if(a.originalEvent.touches&&a.originalEvent.touches.length)c=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)c=a.originalEvent.changedTouches;else break a;if(1<c.length)break a;c=c[0]}else c=a;a.preventDefault();Na(c.pageX)}});F.bind(R,function(a){a:if(W){W= !1;F.unbind(Q).unbind(R);var c;if(H){if(a.originalEvent.touches&&a.originalEvent.touches.length)c=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)c=a.originalEvent.changedTouches;else break a;if(1<c.length)break a;c=c[0]}else c=a;a.preventDefault();Na(c.pageX)}})}return!1}}function Na(a){m=Math.max(0,Math.min(1,(a-ja.offset().left)/S));ka()}function ka(){jb.css("width",m*S+"px");v&&soundManager.setVolume(r,100*m);0<m?d.find(".player_volume").find("img").attr("src", Oa):d.find(".player_volume").find("img").attr("src",Pa)}function kb(){v&&(X.css("display","block"),Y.bind("mousemove",Qa).bind("mouseout",la),F.bind("mouseout",la))}function la(){v&&(X.css("display","none"),Y.unbind("mousemove",Qa).unbind("mouseout",la),F.unbind("mouseout",la))}function Qa(a){a=a.pageX-ja.offset().left;0>a?a=0:a>S&&(a=S);var b=a+parseInt(Y.css("left"),10)+parseInt(lb.css("left"),10)+parseInt(ja.css("left"),10)-X.width()/2;X.css("left",b+"px");a=Math.max(0,Math.min(1,a/S));a=parseInt(100* a,10);X.find("p").html(a+" %")}function mb(a){if(k&&v&&!W&&!ma){if(!P){if(H){if(a=a.originalEvent.touches,!(a&&0<a.length))return!1}else a.preventDefault();P=!0;F.bind(Q,function(a){a:{var c;if(H){if(a.originalEvent.touches&&a.originalEvent.touches.length)c=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)c=a.originalEvent.changedTouches;else break a;if(1<c.length)break a;c=c[0]}else c=a;a.preventDefault();Ra(c.pageX)}});F.bind(R,function(a){a:if(P){P= !1;F.unbind(Q).unbind(R);var c;if(H){if(a.originalEvent.touches&&a.originalEvent.touches.length)c=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)c=a.originalEvent.changedTouches;else break a;if(1<c.length)break a;c=c[0]}else c=a;a.preventDefault();Ra(c.pageX)}})}return!1}}function Ra(a){L=a-Sa.offset().left;0>L?L=0:L>I&&(L=I);na.width(L);a=Math.max(0,Math.min(1,L/I));soundManager.setPosition(r,a*nb())}function ob(){v&&(Z.css("display","block"), T.bind("mousemove",Ta).bind("mouseout",oa),F.bind("mouseout",oa))}function oa(){v&&(Z.css("display","none"),T.unbind("mousemove",Ta).unbind("mouseout",oa),F.unbind("mouseout",oa))}function Ta(a){a=a.pageX-T.offset().left;0>a?a=0:a>I&&(a=I);var b=a+parseInt(T.css("left"),10)-Z.width()/2;Z.css("left",b+"px");a=Math.max(0,Math.min(1,a/I));b=t.duration?parseInt(t.bytesLoaded/t.bytesTotal*(t.duration/1E3)):M?parseInt(t.bytesLoaded/t.bytesTotal*(M/1E3)):void 0;a*=b;isNaN(a)||Z.find("p").html(xa(a)+pb+Ua(t.duration/ 1E3))}function ya(){z?(z.reinitialise(),z.scrollToY(0)):(z=N.jScrollPane().data().jsp,N.bind("jsp-initialised",function(a,b){}).jScrollPane({verticalDragMinHeight:30,verticalDragMaxHeight:40}))}function Va(a){p?(soundManager.pause(r),p=!1,a?d.find(".controls_toggle").find("img").attr("src",isMobile?G:za):d.find(".controls_toggle").find("img").attr("src",isMobile?za:G)):(soundManager.play(r),p=!0,a?d.find(".controls_toggle").find("img").attr("src",isMobile?$:Aa):d.find(".controls_toggle").find("img").attr("src", isMobile?Aa:$));return!1}function Ba(a){if(k&&!q)return a||(a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),a=g(a.currentTarget).attr("data-id"),J(),e.processPlaylistRequest(a),!1}function J(){if(-1!=e.getCounter()){var a=g(A[e.getCounter()]);a&&a.removeClass("playlistSelected").addClass("playlistNonSelected")}}function Wa(){var a=g(A[e.getCounter()]);a&&a.removeClass("playlistNonSelected").addClass("playlistSelected")}function qb(a){if(k&&!q){a||(a=window.event); a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=g(a.currentTarget).attr("class");if("controls_prev"==a){if(!v)return;J();e.advanceHandler(-1,!0)}else if("controls_toggle"==a){if(!v)return;Va(!0)}else if("controls_next"==a){if(!v)return;J();e.advanceHandler(1,!0)}else if("player_volume"==a){if(isIOS)return!1;pa?(m=Xa,pa=!1):(Xa=m,m=0,pa=!0);ka()}else"player_loop"==a?(x?(d.find(".player_loop").find("img").attr("src",qa),x=!1):(d.find(".player_loop").find("img").attr("src", aa),x=!0),e.setLooping(x)):"player_shuffle"==a&&(B?(d.find(".player_shuffle").find("img").attr("src",ra),B=!1):(d.find(".player_shuffle").find("img").attr("src",ba),B=!0),e.setRandom(B));return!1}}function rb(a){if(k)return a||(a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),a=g(a.currentTarget).attr("class"),"controls_prev"==a?d.find(".controls_prev").find("img").attr("src",sb):"controls_toggle"==a?p?d.find(".controls_toggle").find("img").attr("src",Aa):d.find(".controls_toggle").find("img").attr("src", za):"controls_next"==a?d.find(".controls_next").find("img").attr("src",tb):"player_volume"==a?0<m?d.find(".player_volume").find("img").attr("src",ub):d.find(".player_volume").find("img").attr("src",vb):"player_loop"==a?x?d.find(".player_loop").find("img").attr("src",qa):d.find(".player_loop").find("img").attr("src",aa):"player_shuffle"==a&&(B?d.find(".player_shuffle").find("img").attr("src",ra):d.find(".player_shuffle").find("img").attr("src",ba)),!1}function wb(a){if(k)return a||(a=window.event), a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),a=g(a.currentTarget).attr("class"),"controls_prev"==a?d.find(".controls_prev").find("img").attr("src",xb):"controls_toggle"==a?p?d.find(".controls_toggle").find("img").attr("src",$):d.find(".controls_toggle").find("img").attr("src",G):"controls_next"==a?d.find(".controls_next").find("img").attr("src",yb):"player_volume"==a?0<m?d.find(".player_volume").find("img").attr("src",Oa):d.find(".player_volume").find("img").attr("src", Pa):"player_loop"==a?x?d.find(".player_loop").find("img").attr("src",aa):d.find(".player_loop").find("img").attr("src",qa):"player_shuffle"==a&&(B?d.find(".player_shuffle").find("img").attr("src",ba):d.find(".player_shuffle").find("img").attr("src",ra)),!1}function Ya(){h&&-1!=e.getCounter()&&(Ca(),Za(),d.find(".controls_toggle").find("img").attr("src",G),J())}function ca(){Ca();Za();var a=0;for(a;a<s;a++)g(A[a]).unbind("click",Ba);"hidden"!=h&&h.remove();h=null;e.reSetCounter();u=[];A=[];C=[];isMobile&& (U=!1);z&&z.reinitialise()}function $a(a){ab();N.css("opacity",0);h&&ca();var b=zb.find(a).css("display","block").clone();z?b.appendTo(z.getContentPane()):b.appendTo(N);0==b.length?l&&alert('Failed to select playlist! Make sure that element: "'+a+'" exist in playlist list! Quitting.'):(h=b,u=[],A=[],C=[],D=[],b.find("li[class='playlistItem']").each(function(){_item=g(this);D.push(_item)}),O())}function O(){if(D.length)Ab();else{s=C.length;var a=0,b,c,d,E,f,h;for(a;a<s;a++)b=g(A[a]).bind("click",Ba).attr("data-id", a),c=b.html(),Da&&(d=sa(a)+". "+c,b.html(d)),b=g(C[a]),d=h=f="",E=void 0,void 0!=b.attr("data-mp3Path")&&(f=b.attr("data-mp3Path")),void 0!=b.attr("data-oggPath")&&(h=b.attr("data-oggPath")),void 0!=b.attr("data-type")&&(d=b.attr("data-type")),void 0!=b.attr("data-length")&&(E=b.attr("data-length")),u.push({id:a,type:d,title:c,mp3Path:f,oggPath:h,length:E});N.css("opacity",1);Ea&&ya();k||(k=!0,"undefined"!==typeof audioPlayerSetupDone&&audioPlayerSetupDone(r));0==s?(l&&alert("Processing playlist failed. Quitting."), q=!1,ta()):(q=!1,ta(),e.setPlaylistItems(s),Fa(),"undefined"!==typeof audioPlayerPlaylistLoaded&&audioPlayerPlaylistLoaded(r))}}function Ab(){var a=D[0],b=a.attr("data-type").toLowerCase(),c=a.attr("data-path");w=[];if("local"==b)C.push(a),A.push(a.find("a[class='playlistNonSelected']")),D.shift(),O();else if("soundcloud"==b)a.remove(),Ga(c);else if("podcast"==b)a.remove(),b="http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&output=xml&num=10&callback=?&q="+encodeURIComponent(c),g.ajax({type:"GET", url:b,dataType:"jsonp",cache:!1,success:function(a){if(ieBelow9){a=Bb(a.responseData.xmlString);var b;g(a).find("item").each(function(){b=g(this);e={type:"podcast"};e.mp3=b.find("enclosure").attr("url");e.ogg="";e.title=b.find("title").text();w.push(e)})}else{bb.html(a.responseData.xmlString);a=bb.get(0).getElementsByTagName("item");var c=0,d=a.length,f,E,e;for(c;c<d;c++)f=a[c],e={type:"podcast"},e.mp3=f.getElementsByTagName("enclosure")[0].getAttribute("url"),e.ogg="",void 0!=f.getElementsByTagName("itunes:duration")[0]&& (E=Cb(f.getElementsByTagName("itunes:duration")[0].childNodes[0].nodeValue),e.length=parseInt(1E3*E,10)),e.title=f.getElementsByTagName("title")[0].childNodes[0].nodeValue,w.push(e)}da()},error:function(a,b){l&&alert("Parse feed error: "+b);l&&alert("Playlist selection failed: "+c);D.shift();O()}});else if("folder"==b)a.remove(),jQuery.getJSON("php/folder_parser.php","folderUrl=../"+c,function(a){var b=0,c=a.length,d,e;for(b;b<c;b++)d=a[b],d.indexOf("\\")&&(d=d.replace(/\\/g,"/")),e={type:"local"}, d.indexOf(".mp3")&&(e.mp3=d),e.ogg=d.substr(0,d.lastIndexOf("."))+".ogg",no_ext=d.substr(0,d.lastIndexOf(".")),d=no_ext.indexOf("/")?no_ext.substr(no_ext.lastIndexOf("/")+1):no_ext,d=d.split("_").join(" "),e.title=d,w.push(e);da()}).error(function(){l&&alert("Read folder error! Make sure you run this online or on local server!");l&&alert("Playlist selection failed: "+c);D.shift();O()});else if("xml"==b){Ha=a;a.css("display","none");var d,E,f,h,e,k;g.ajax({type:"GET",url:c,dataType:"html",cache:!1, success:function(b){g(b).find("li[class='playlistItem']").each(function(){k=g(this);e=k.attr("data-type");d=g("<div>").append(k.clone()).html();"local"==e?(E=document.createElement("ul"),E.innerHTML=d,f=E.firstChild,h=E.firstChild.firstChild,Ha.after(g(f)),Ha=g(f),C.push(g(f)),A.push(g(h))):"xml"==e?l&&alert("You cannot load xml over xml, this feature is not supported. Skipping processing of playlist: "+d):D.push(k)});a.remove();D.shift();O()},error:function(a,b){l&&alert("Parse xml error! Make sure you run this online or on local server!"); l&&alert("Playlist selection failed: "+c);D.shift();O()}})}else l&&alert("Invalid playlist data-type attribute!")}function da(){if(w.length){var a,b,c=0,d=w.length;for(c;c<d;c++)a=g('<li class= "playlistItem" data-type="'+w[c].type+'" data-mp3Path="'+w[c].mp3+'" data-oggPath="'+w[c].ogg+'"></li>').addClass("playlistItem").appendTo(h),w[c].length&&a.attr("data-length",w[c].length),b=g('<a class="playlistNonSelected" href="#">'+w[c].title+"</a>").addClass("playlistNonSelected").appendTo(a),C.push(a), A.push(b)}D.shift();O()}function Ia(a){var b,c,d=A.length?!1:!0;for(a;a<s;a++)d||(b=g(A[a]).attr("data-id",a),Da&&(c=b.html(),c=c.substr(c.indexOf(".")+2),u[a].title=c,c=sa(a)+". "+c,b.html(c))),u[a].id=a}function Fa(){var a=f.activeItem;-1!=a?(0>a?a=0:a>s-1&&(a=s-1),e.setCounter(a,!1)):U=!0}function Ga(a){g.getJSON(Db(a,ua),function(b){var c,d,e;if(b.tracks){d=b.tracks.length;for(e=0;e<d;e++)c={type:"soundcloud"},b.tracks[e].duration&&(c.length=b.tracks[e].duration),c.thumbUrl=b.tracks[e].artwork_url? b.tracks[e].artwork_url:"",c.mp3=b.tracks[e].stream_url+(/\?/.test(b.tracks[e].stream_url)?"&":"?")+"consumer_key="+ua,c.ogg="",c.title=b.tracks[e].title,w.push(c);da()}else if(b.duration)b.permalink_url=a,c={type:"soundcloud"},b.duration&&(c.length=b.duration),c.thumbUrl=b.artwork_url?b.artwork_url:"",c.mp3=b.stream_url+(/\?/.test(b.stream_url)?"&":"?")+"consumer_key="+ua,c.ogg="",c.title=b.title,w.push(c),da();else if(b.username)/favorites/.test(a)?Ga(b.uri+"/favorites"):Ga(b.uri+"/tracks");else if(g.isArray(b)){d= b.length;for(e=0;e<d;e++)c={type:"soundcloud"},b[e].duration&&(c.length=b[e].duration),c.thumbUrl=b[e].artwork_url?b[e].artwork_url:"",c.mp3=b[e].stream_url+(/\?/.test(b[e].stream_url)?"&":"?")+"consumer_key="+ua,c.ogg="",c.title=b[e].title,w.push(c);da()}}).error(function(){l&&alert("SoundCloud process error!");q=!1})}function Db(a,b){return(/api\./.test(a)?a+"?":"http://api.soundcloud.com/resolve?url="+a+"&")+"format=json&consumer_key="+b+"&callback=?"}function Ca(){t&&(soundManager.destroySound(r), t=null);Ja();Ka=v=p=ma=!1}function Eb(){var a=this.bytesLoaded/this.bytesTotal;isNaN(a)||La.width(a*I)}function Fb(){var a=this.position/1E3,b;this.duration?b=this.duration/1E3:M&&(b=M/1E3);isNaN(a)||ea.html(xa(a)+cb);isNaN(a)||isNaN(b)?ma=!0:(ea.html(xa(a)+cb),va.html(Ua(b)),P||na.width(a/b*I),ma=!1)}function Gb(){}function nb(){if(t.duration)return parseInt(t.bytesLoaded/t.bytesTotal*t.duration);if(M)return parseInt(t.bytesLoaded/t.bytesTotal*M)}function Hb(){"undefined"!==typeof audioPlayerSoundEnd&& audioPlayerSoundEnd(e.getCounter());J();e.advanceHandler(1,!0)}function Ib(a){}function Jb(){Ka||("undefined"!==typeof audioPlayerSoundStart&&audioPlayerSoundStart(e.getCounter()),Ka=!0);"undefined"!==typeof audioPlayerSoundPlay&&audioPlayerSoundPlay(r)}function Kb(){"undefined"!==typeof audioPlayerSoundPlay&&audioPlayerSoundPlay(r)}function Lb(){"undefined"!==typeof audioPlayerSoundPause&&audioPlayerSoundPause(r)}function ta(){db.css("display","none")}function ab(){db.css("display","block")}function Za(){n&& fa&&n.deactivate();K.html(Ma);ea.html(eb);va.html(fb);na.width(0);La.width(0);d.find(".controls_toggle").find("img").attr("src",G)}function Ja(){gb||(n&&n.deactivate(),K.html(Ma));ea.html(eb);va.html(fb);na.width(0);La.width(0);d.find(".controls_toggle").find("img").attr("src",G)}function xa(a){a=Math.round(a);minutes=Math.floor(a/60);minutes=10<=minutes?minutes:"0"+minutes;a=Math.floor(a%60);return minutes+":"+(10<=a?a:"0"+a)}function Ua(a){a=Math.round(a);minutes=Math.floor(a/60);minutes=10<=minutes? minutes:"0"+minutes;a=Math.floor(a%60);return minutes+":"+(10<=a?a:"0"+a)}function V(a){return 0==u[a].title.replace(/^\s+|\s+$/g,"").length?(K.html(Ma),!1):sa(u[a].id)+". "+u[a].title}function sa(a){return 9>a?"0"+(a+1):a+1}function Cb(a){a=a.split(":");for(var b=0,c=1;0<a.length;)b+=c*parseInt(a.pop()),c*=60;return b}function Bb(a){if(window.ActiveXObject&&window.GetObject){var b=new ActiveXObject("Microsoft.XMLDOM");b.loadXML(a);return b}if(window.DOMParser)return(new DOMParser).parseFromString(a, "text/xml");throw Error("No XML parser available");}var k=!1;g("body");g(window);var F=g(document),ga=document.createElement("audio");ga.canPlayType&&(ga.canPlayType&&ga.canPlayType("audio/mpeg"),ga.canPlayType&&ga.canPlayType('audio/ogg; codecs="vorbis"'));var d=g(f.playerHolder);d.find(".componentPlaylist");var N=d.find(".playlist_inner").css("opacity",0);d.find(".playlistHolder");d.find(".playerHolder");d.find(".player_mediaTime");var ea=d.find(".player_mediaTime_current"),va=d.find(".player_mediaTime_total"), Mb=d.find(".player_mediaName_Mask"),K=d.find(".player_mediaName"),lb=d.find(".player_controls"),db=d.find(".preloader"),xb=f.buttonsUrl.prev,sb=f.buttonsUrl.prevOn,yb=f.buttonsUrl.next,tb=f.buttonsUrl.nextOn,G=f.buttonsUrl.play,za=f.buttonsUrl.playOn,$=f.buttonsUrl.pause,Aa=f.buttonsUrl.pauseOn,qa=f.buttonsUrl.loop,aa=f.buttonsUrl.loopOn,Oa=f.buttonsUrl.volume,ub=f.buttonsUrl.volumeOn,Pa=f.buttonsUrl.mute,vb=f.buttonsUrl.muteOn,ra=f.buttonsUrl.shuffle,ba=f.buttonsUrl.shuffleOn,zb=g(f.playlistHolder), r=f.sound_id,U=f.autoPlay,Nb=f.autoLoad;isMobile&&(U=!1);var ua=f.soundcloudApiKey,fa=f.useSongNameScroll,gb=f.autoSetSongTitle,x=f.loopingOn,B=f.randomPlay,cb=f.mediaTimeSeparator,pb=f.seekTooltipSeparator,Da=f.useNumbersInPlaylist,hb=f.activePlaylist,l=f.useAlertMessaging,Ea=f.ativatePlaylistScroll,Ha,h=null,q=!0,ma=!1,Ka=!1,t,Ma=K.html(),eb=ea.html(),fb=va.html(),v=!1,ha="",ia="",p=!1,M;x&&d.find(".player_loop").find("img").attr("src",aa);B&&d.find(".player_shuffle").find("img").attr("src",ba); var u=[],A=[],C=[],s,z,bb=g("<div/>").css("display","none").appendTo(d),w=[],D=[],n;(function(){if(fa){var a=g("<div/>").addClass("fontMeasure").appendTo(d);n=new apTextScroller;n.init(a,K,Mb,"left",f.scrollSeparator,f.scrollSpeed)}})();var e=g.playlistManager({randomPlay:B,loopingOn:x});g(e).bind("ap_PlaylistManager.COUNTER_READY",function(){var a=e.getCounter();Wa();gb&&(n&&fa?(n.deactivate(),V(a)&&(n.input(V(a)),n.activate())):V(a)&&K.html(V(a)));ha=u[a].mp3Path;ia=u[a].oggPath;M=u[a].length?u[a].length: null;Ca();-1<ha.indexOf("../")&&(ha=ha.substring(3));-1<ia.indexOf("../")&&(ia=ia.substring(3));t=soundManager.createSound({id:r,url:[ha,ia],autoLoad:Nb,autoPlay:U,volume:100*m,whileloading:Eb,whileplaying:Fb,onfinish:Hb,onload:Ib,onsuspend:Gb,onplay:Jb,onpause:Lb,onresume:Kb});U?(p=!0,d.find(".controls_toggle").find("img").attr("src",$)):(p=!1,d.find(".controls_toggle").find("img").attr("src",G));ka();U=v=!0;"undefined"!==typeof itemTriggered&&itemTriggered(a)});g(e).bind("ap_PlaylistManager.PLAYLIST_END", function(){Wa();"undefined"!==typeof audioPlayerPlaylistEnd&&audioPlayerPlaylistEnd(r)});g(e).bind("ap_PlaylistManager.PLAYLIST_END_ALERT",function(){"undefined"!==typeof audioPlayerPlaylistEnd&&audioPlayerPlaylistEnd(r)});var wa="",Q="",R="",H;"ontouchstart"in window?(H=!0,wa="touchstart.ap",Q="touchmove.ap",R="touchend.ap"):(H=!1,wa="mousedown.ap",Q="mousemove.ap",R="mouseup.ap");var Xa,pa=!1,m=f.defaultVolume;0>m?m=0:1<m&&(m=1);var W=!1,ja=d.find(".volume_bg"),S=ja.width(),jb=d.find(".volume_level").css("width", m*S+"px"),Y=d.find(".volume_seekbar").css("cursor","pointer").bind(wa,function(a){if(isIOS)return!1;ib(a);return pa=!1});if(!isMobile){Y.bind("mouseover",kb);var X=d.find(".player_volume_tooltip").css("left",parseInt(Y.css("left"),10)+"px")}var L,P=!1,Sa=d.find(".progress_bg"),La=d.find(".load_progress"),na=d.find(".play_progress"),I=Sa.width(),T=d.find(".player_progress").css("cursor","pointer").bind(wa,function(a){mb(a);return!1});if(!isMobile){T.bind("mouseover",ob);var Z=d.find(".player_progress_tooltip").css("left", parseInt(T.css("left"),10)+"px")}(function(){soundManager.onready(function(){var a=[d.find(".controls_next"),d.find(".controls_prev"),d.find(".controls_toggle"),d.find(".player_volume"),d.find(".player_loop"),d.find(".player_shuffle")],b,c=a.length,e=0;for(e;e<c;e++)b=g(a[e]).css("cursor","pointer").bind("click",qb),!isMobile&&b.bind("mouseover",rb).bind("mouseout",wb);0!=hb.replace(/^\s+|\s+$/g,"").length?$a(hb):k||(q=!1,k=!0,"undefined"!==typeof audioPlayerSetupDone&&audioPlayerSetupDone(r),ta())}); soundManager.ontimeout(function(a){l&&l&&(alert("SM2 failed to start. Flash missing, blocked or security error? Status: "+a.error.type),alert("SM2 could be trying to use flash. Make sure you test this ONLINE or ON LOCAL SERVER!"))})})();this.playAudio=function(){if(!k||q||!h||p||!v)return!1;soundManager.play(r);d.find(".controls_toggle").find("img").attr("src",$);v=p=!0};this.pauseAudio=function(){if(!k||q||!h||!p||!v)return!1;soundManager.pause(r);d.find(".controls_toggle").find("img").attr("src", G);p=!1};this.toggleAudio=function(){if(!k||q||!h||!v)return!1;Va()};this.stopAudio=function(){if(!k||q||!h||!v)return!1;soundManager.stop(r);Ja();p=!1};this.nextAudio=function(){if(!k||q||!h)return!1;J();e.advanceHandler(1,!0)};this.previousAudio=function(){if(!k||q||!h)return!1;J();e.advanceHandler(-1,!0)};this.loadAudio=function(a){if(!k||q||!h)return!1;if("string"===typeof a){var b=0,c=!1;for(b;b<s;b++)if(a==u[b].title){a=b;c=!0;break}if(!c)return l&&alert('Track with name "'+a+'" doesnt exist. Load audio failed.'), !1}else if("number"===typeof a){if(0>a||a>s-1)return l&&alert('Invalid track number. Track number "'+a+'" doesnt exist. Load audio failed.'),!1}else return l&&alert("Load audio method requires either a track number or a track title to load. Load audio failed."),!1;J();e.processPlaylistRequest(a)};this.loadPlaylist=function(a){if(!k||q)return!1;if("undefined"===typeof a)return l&&alert("loadPlaylist method requires playlist parameter. loadPlaylist failed."),!1;q=!0;$a(a)};this.addTrack=function(a, b){if(!k||q)return!1;if("undefined"===typeof a)return l&&alert("addTrack method requires track parameter. AddTrack failed."),!1;var c=1;if("string"!==typeof a)if(a instanceof Array)c=a.length;else return l&&alert("addTrack method requires track as string or array parameter. AddTrack failed."),!1;h&&"hidden"==h&&ca();var d=0,f,r,n,y,m,v,t,p,w=0;if(h)if("undefined"!==typeof b){if(0>b||b>s-1)return l&&alert('Invalid position to insert track to. Position number "'+b+'" doesnt exist. AddTrack failed.'), !1}else m=!0,b=s-1;else{if("undefined"!==typeof b){if(0!=b)return l&&alert('Invalid position to insert track to. Position number "'+b+'" doesnt exist. AddTrack failed.'),!1}else b=0;m=!0;ab();t="playlist"+Math.floor(9999*Math.random());var x=g("<ul id = "+t+"></ul>");z?x.appendTo(z.getContentPane()):x.appendTo(N)}t=b;for(d;d<c;d++)f=document.createElement("ul"),p=1<c?a[d]:a,f.innerHTML=p,n=f.firstChild,f=f.firstChild.firstChild,y=g(n),n=g(f),void 0!=y.attr("data-type")&&"local"!=y.attr("data-type")? l&&alert('addTrack method supports local type tracks only. addTrack "'+p+'" failed.'):void 0!=y.attr("data-mp3Path")?(f=y.attr("data-mp3Path"),r="",void 0!=y.attr("data-oggPath")&&(r=y.attr("data-oggPath")),h?m?C[b].after(y):C[b].before(y):x.append(y),p=m?b+1:b,C.splice(p,0,y),A.splice(p,0,n),n.bind("click",Ba),y=n.html(),Da&&(v=sa(b)+". "+y,n.html(v)),n={id:b,type:"local",title:y,mp3Path:f,oggPath:r,length:void 0},u.splice(p,0,n),1<c&&(b+=1),w++):l&&alert('addTrack method requires "data-mp3Path" attributte. addTrack "'+ p+'" failed.');s=u.length;Ia(0);c=e.getCounter();e.setPlaylistItems(s,!1);t<=c&&(m||e.reSetCounter(c+w));ta();N.css("opacity",1);Ea&&ya();h||(h=x,Fa())};this.inputAudio=function(a,b){if(!k||q)return!1;if("undefined"===typeof a)return l&&alert("inputAudio method requires track parameter. inputAudio failed."),!1;var c=1;if(!(a instanceof Object)||a instanceof Array)if(a instanceof Object&&a instanceof Array)c=a.length;else return l&&alert("inputAudio method requires track as object or array parameter. inputAudio failed."), !1;h&&"hidden"!=h&&ca();var d=0,f,g,n,p,r,m,t=0;if(h)if("undefined"!==typeof b){if(0>b||b>s-1)return l&&alert('Invalid position to insert track to. Position number "'+b+'" doesnt exist. inputAudio failed.'),!1}else p=!0,b=s-1;else{if("undefined"!==typeof b){if(0!=b)return l&&alert('Invalid position to insert track to. Position number "'+b+'" doesnt exist. AddTrack failed.'),!1}else b=0;p=!0;s=0}r=b;for(d;d<c;d++)m=1<c?a[d]:a,m.mp3?(f=m.mp3,g="",m.ogg&&(g=m.ogg),n="",m.title&&(n=m.title),m=p?b+1:b, f={id:b,type:"local_hidden",title:n,mp3Path:f,oggPath:g,length:void 0},u.splice(m,0,f),1<c&&(b+=1),t++):l&&alert('inputAudio method requires mp3 parameter. inputAudio "'+m+'" failed.');s=u.length;Ia(0);c=e.getCounter();e.setPlaylistItems(s,!1);r<=c&&(p||e.reSetCounter(c+t));q=!1;h||(h="hidden",Fa())};this.removeTrack=function(a){if(!k||q||!h)return!1;if("string"===typeof a){var b=0,c=!1;for(b;b<s;b++)if(a==u[b].title){a=b;c=!0;break}if(!c)return l&&alert('Track with name "'+a+'" doesnt exist. RemoveTrack failed.'), !1}else if("number"===typeof a){if(0>a||a>s-1)return l&&alert('Invalid track number. Track number "'+a+'" doesnt exist. RemoveTrack failed.'),!1}else return l&&alert("RemoveTrack method requires either a track number or a track title to remove. RemoveTrack failed."),!1;"hidden"!=h&&(C[a].remove(),C.splice(a,1),A.splice(a,1));u.splice(a,1);s=u.length;0<s?(Ia(0),b=e.getCounter(),a==b?(Ya(),e.setPlaylistItems(s)):(e.setPlaylistItems(s,!1),a<b&&e.reSetCounter(e.getCounter()-1)),"hidden"!=h&&Ea&&ya()): ca()};this.destroyAudio=function(){if(!k||q||!h)return!1;Ya()};this.destroyPlaylist=function(){if(!k||q||!h)return!1;ca()};this.setTitle=function(a){if(!k||q||!h)return!1;n&&fa?(n.deactivate(),n.input(a),n.activate()):K&&K.html(a)};this.checkAudio=function(a){if(!k||q||!h)return!1;p&&("pause"==a?soundManager.pause(r):"stop"==a&&(soundManager.stop(r),Ja()),p=!1,d.find(".controls_toggle").find("img").attr("src",G))};this.toggleShuffle=function(){if(!k)return!1;B?(d.find(".player_shuffle").find("img").attr("src", ra),B=!1):(d.find(".player_shuffle").find("img").attr("src",ba),B=!0);e.setRandom(B)};this.toggleLoop=function(){if(!k)return!1;x?(d.find(".player_loop").find("img").attr("src",qa),x=!1):(d.find(".player_loop").find("img").attr("src",aa),x=!0);e.setLooping(x)};this.setVolume=function(a){if(!k||q)return!1;0>a?a=0:1<a&&(a=1);m=a;ka()};this.getMediaPlaying=function(){return!k||q?!1:p};this.reinitPlaylistScroll=function(){if(!k||q||!h)return!1;z&&(z.reinitialise(),z.scrollToY(0))};this.reinitNameScroll= function(){if(!k||q||!h)return!1;if(n&&fa&&e&&-1!=e.getCounter()){var a=e.getCounter();V(a)&&(n.input(V(a)),n.activate())}};this.outputPlaylistData=function(){if(!k||q)return!1;if(h)try{console.log(u)}catch(a){}};return this}})(jQuery);